parameters:
  AzureSubscription:
  ServerName:
  DatabaseName:
  SqlUsername:
  SqlPassword:
  DacpacFile:
  AdditionalArguments:
  SqlAdditionalArguments:

steps:
- task: SqlAzureDacpacDeployment@1
  displayName: Execute Azure SQL DacpacTask
  condition: and(ne(variables.BuildToRunAdditionalArgumentsOn, variables['Build.Buildnumber']), ne(variables.BuildToRunSqlAdditionalArgumentsOn, variables['Build.BuildNumber'])))
  inputs:
    AzureSubscription: ${{ parameters.AzureSubscription }}
    ServerName: ${{ parameters.ServerName }}
    DatabaseName: ${{ parameters.DatabaseName }}
    SqlUsername: ${{ parameters.SqlUsername }}
    SqlPassword: ${{ parameters.SqlPassword }}
    DacpacFile: ${{ parameters.DacpacFile }} 

- task: SqlAzureDacpacDeployment@1
  displayName: Execute Azure SQL DacpacTask
  condition: eq(variables.BuildToRunAdditionalArgumentsOn, variables['Build.BuildNumber'])
  inputs:
    AzureSubscription: ${{ parameters.AzureSubscription }}
    ServerName: ${{ parameters.ServerName }}
    DatabaseName: ${{ parameters.DatabaseName }}
    SqlUsername: ${{ parameters.SqlUsername }}
    SqlPassword: ${{ parameters.SqlPassword }}
    DacpacFile: ${{ parameters.DacpacFile }}
    AdditionalArguments: ${{ parameters.AdditionalArguments }}

- task: SqlAzureDacpacDeployment@1
  displayName: Execute Azure SQL DacpacTask
  condition: eq(variables.BuildToRunSqlAdditionalArgumentsOn, variables['Build.BuildNumber'])
  inputs:
    AzureSubscription: ${{ parameters.AzureSubscription }}
    ServerName: ${{ parameters.ServerName }}
    DatabaseName: ${{ parameters.DatabaseName }}
    SqlUsername: ${{ parameters.SqlUsername }}
    SqlPassword: ${{ parameters.SqlPassword }}
    DacpacFile: ${{ parameters.DacpacFile }}
    SqlAdditionalArguments: ${{ parameters.SqlAdditionalArguments }}

- task: SqlAzureDacpacDeployment@1
  displayName: Execute Azure SQL DacpacTask
  condition: and(eq(variables.BuildToRunAdditionalArgumentsOn, variables['Build.BuildNumber']), eq(variables.BuildToRunSqlAdditionalArgumentsOn, variables['Build.BuildNumber']))
  inputs:
    AzureSubscription: ${{ parameters.AzureSubscription }}
    ServerName: ${{ parameters.ServerName }}
    DatabaseName: ${{ parameters.DatabaseName }}
    SqlUsername: ${{ parameters.SqlUsername }}
    SqlPassword: ${{ parameters.SqlPassword }}
    DacpacFile: ${{ parameters.DacpacFile }}
    AdditionalArguments: ${{ parameters.AdditionalArguments }}
    SqlAdditionalArguments: ${{ parameters.SqlAdditionalArguments }}
